<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Appendix :: Cloud Native Robotz Hackathon</title>
    <link rel="canonical" href="https://cloud-native-robotz-hackathon.github.io/modules/stable/appendix.html">
    <link rel="prev" href="challenge-2.html">
    <meta name="generator" content="Antora 3.0.0">
    <link rel="stylesheet" href="../../_/css/site.css">
<link rel="icon" href="../../_/img/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <img src="../../_/img/robot.png" />
      <h1>&nbsp;&nbsp;Cloud Native Robotz Hackathon</h1>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" target="_blank" href="https://github.com/cloud-native-robotz-hackathon/infrastructure/issues/new">Feedback</a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="modules" data-version="stable">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html" class=" query-params-link">Lab guide</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="data-science.html">0. Data Science</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="control-robot.html">1. Control your Robot</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="develop-controlapp.html">2. Develop Control Application</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="improve-app1.html">3. Improve Control App Part 1</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="improve-app2.html">4. Improve Control App Part 2</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="auto-robot.html">5. The Autonomous Robot: Compete!</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="challenge-2.html">6. Final Challenge</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="appendix.html">Appendix</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Lab guide</span>
    <span class="version">stable</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Lab guide</span>
      <ul class="versions">
        <li class="version is-current">
          <a href="index.html">stable</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">Lab guide</a></li>
    <li><a href="appendix.html">Appendix</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/cloud-native-robotz-hackathon/lab-guide/edit/main/content/modules/ROOT/pages/appendix.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<article class="doc">
<h1 class="page">Appendix</h1>
<div class="sect1">
<h2 id="_retrain_and_redeploy_model"><a class="anchor" href="#_retrain_and_redeploy_model"></a>Retrain and Redeploy Model</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Perhaps you would to like to tweak and increase the detection quality of your model later on? You can rerun the Pipeline and increase the Sample Size (Number of Images used for training), epochs (Number of training iterations) and batch size.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
When rerunning the pipeline, a new onnx model will be created in the S3 bucket <code>/models</code> folder and copied over the <code>model-latest.onnx</code> file. It will not automatically be deployed to the running model server!
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To deploy the new model to the model server, we need to find out the new model filename. In the <strong>pipeline run</strong> view, click on the last task (<code>model_upload</code>) and look a the logs.  You should see an entry similar to this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>initializing S3 client
uploading model to models/model-2410151507.onnx
model uploaded and available as "models/model-2410151507.onnx"
uploading model to models/model-latest.onnx
model uploaded and available as "models/model-latest.onnx"</pre>
</div>
</div>
<div class="paragraph">
<p>In this case <code>model-2410151507.onnx</code> is the new model created by this pipeline run.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Now in your Openshift AI Project go to <strong>Models</strong> and click on the three dots next to the model <code>fedora-detection-service</code></p>
</li>
<li>
<p>Change the <strong>Path</strong> value to your new model (e.g. models/model-2410151507.onnx)</p>
</li>
<li>
<p>This wil trigger a redeploy and you can now test the new model</p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
There is another more kube native way to update the model. You can actually change the yaml of the underlying OpenShift ressource.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_model_redeploy_by_editing_resource_yaml"><a class="anchor" href="#_model_redeploy_by_editing_resource_yaml"></a>Model redeploy by editing Resource yaml</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Go to the <strong>OpenShift Console</strong> select your project</p>
</li>
<li>
<p>In the menu on the left click on <strong>Home</strong> &gt; <strong>Search</strong></p>
</li>
<li>
<p>Now in the <strong>resources</strong> field enter <code>InferenceService</code></p>
</li>
<li>
<p>Check <strong>InferenceService</strong> in the dropdown</p>
</li>
<li>
<p>Click on the <code>fedora-detection-service</code></p>
</li>
<li>
<p>Click on <strong>YAML</strong> to edit</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Look for the <strong>path</strong> entry</p>
</div>
<div class="listingblock">
<div class="content">
<pre> path: models/model-latest.onnx</pre>
</div>
</div>
<div class="paragraph">
<p>and change it to your new model name</p>
</div>
<div class="paragraph">
<p>This opens up possibilities to use GitOps to configure your MLOps ressources by the way.</p>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="challenge-2.html" class="query-params-link">6. Final Challenge</a></span>
</nav>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <a class="rhd-logo" href="https://developers.redhat.com" target="_blank"></div>
</footer>
<script src="../../_/js/vendor/clipboard.js"></script>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
